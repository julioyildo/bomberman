"use strict";function random(e,s){return Math.floor((s-e)*Math.random())+e}var cell=function(e,s,t,i){this.posX=e,this.posY=s,this.status=t,this.div=i,this.createDiv=function(e){this.div=document.createElement("div"),this.div.classList.add("cell"),this.div.classList.add(this.status),e.appendChild(this.div)},this.updateStatus=function(e){this.div.classList.remove(t),this.status=e,this.div.classList.add(e)}},power=4,map=function(e,s){this.rows=e,this.columns=s,this.div=document.querySelector(".bomberman-map"),this.cells=[e],this.breakableWalls=100,this.generateMap=function(){for(var e=0;e<this.rows;e++){this.cells[e]=[this.columns];for(var s=0;s<this.columns;s++){var t="empty";this.isUnbreakable(e,s)&&(t="unbreakable");var i=new cell(e,s,t);i.createDiv(this.div),this.cells[e][s]=i}}},this.generateBreakableWall=function(){for(var e=0;e<this.breakableWalls;e++){do{var s=random(1,this.rows),t=random(1,this.columns)}while(this.isUnbreakable(s,t)||this.isCorner(s,t));this.cells[s][t].updateStatus("breakable")}},this.isUnbreakable=function(e,s){return 0==e||e==this.rows-1||0==s||s==this.columns-1||s%2==0&&e%2==0},this.isCorner=function(e,s){if(1==e){if(s>=1&&s<=power)return!0;if(s<=this.columns&&s>=this.columns-power-1)return!0}if(e==this.rows-2){if(s>=1&&s<=power)return!0;if(s<=this.columns&&s>=this.columns-power-1)return!0}if(1==s){if(e>=1&&e<=power)return!0;if(e<=this.rows&&e>=this.rows-power-1)return!0}if(s==this.columns-2){if(e>=1&&e<=power)return!0;if(e<=this.rows&&s>=this.rows-power-1)return!0}return!1}},create_map=new map(15,15);create_map.generateMap(),create_map.generateBreakableWall();var player=function(e,s,t){this.playerPosX=e,this.playerPosY=s,this.createPlayer=function(){this.div=document.createElement("div"),this.div.style.top=this.playerPosY+"px",this.div.style.left=this.playerPosX+"px",this.div.classList.add("player"),document.querySelector(".bomberman-map").appendChild(this.div)},this.movePlayer=function(){var t=this;t.playerPosX=e,t.playerPosY=s,window.addEventListener("keydown",function(e){t.posX=Math.floor(t.playerPosX/50),t.posY=Math.floor(t.playerPosY/50),38==e.keyCode?!1===create_map.isUnbreakable(t.posX,t.posY)&&(t.playerPosY-=15):39==e.keyCode?!1===create_map.isUnbreakable(t.posX,t.posY)&&(t.playerPosX+=15):40==e.keyCode?!1===create_map.isUnbreakable(t.posX,t.posY)&&(t.playerPosY+=15):37==e.keyCode&&!1===create_map.isUnbreakable(t.posX,t.posY)&&(t.playerPosX-=15),t.div.style.top=t.playerPosY+"px",t.div.style.left=t.playerPosX+"px"})},this.putBomb=function(){var t=this;t.playerPosX=e,t.playerPosY=s,t.bombUsed=!1,window.addEventListener("keydown",function(e){if(e.preventDefault,t.posX=Math.floor(t.playerPosX/50),t.posY=Math.floor(t.playerPosY/50),32==e.keyCode&&!t.bombUsed){this.div=document.createElement("div"),this.div.style.top=t.playerPosY+"px",this.div.style.left=t.playerPosX+"px",this.div.classList.add("bomb");document.querySelector(".bomberman-map").appendChild(this.div),t.bombUsed=!0,setTimeout(function(){t.bombUsed=!1,this.div.remove()},3e3)}})}},bomber=new player(50,50);bomber.createPlayer(),bomber.movePlayer(),bomber.putBomb();